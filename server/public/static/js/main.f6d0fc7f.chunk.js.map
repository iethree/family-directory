{"version":3,"sources":["utilities.js","upload.js","edit.js","family.js","news.js","scrollspy.js","sidebar.js","index.js"],"names":["getFetch","_x","_getFetch","apply","this","arguments","_callee","endpoint","regenerator_default","a","wrap","_context","prev","next","abrupt","Promise","resolve","reject","fetch","method","headers","Content-Type","credentials","then","r","json","catch","console","log","stop","_callee2","data","_context2","body","JSON","stringify","Uploader","props","_useState","useState","_useState2","Object","slicedToArray","dragover","setDragover","_useState3","_useState4","uploading","setUploading","addFiles","newFiles","goodFiles","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","i","value","type","push","err","return","length","uploadData","FormData","_i","_goodFiles","f","append","xhr","XMLHttpRequest","url","id","imageId","open","onload","e","onChange","send","onNotHover","react_default","createElement","className","onDragOver","preventDefault","onDrop","validFiles","dataTransfer","items","kind","getAsFile","files","onDragLeave","target","onClick","document","getElementById","click","children","EditWindow","_ref","person","edit","p","setPerson","close","setValue","label","getAttribute","objectSpread","EditPicture","name","Input","disabled","location","EditDates","dates","EditContact","contacts","emails","_x2","_x3","_postFetch","postFetch","aria-label","_ref2","placeholder","_ref3","update","_ref4","splice","toConsumableArray","map","d","DateInput","date","description","key","_ref5","moment","format","img","setImg","src","alt","_ref6","_ref7","contact","c","ContactInput","_ref8","Directory","family","gc","ggc","pid","s","Number","cid","Math","floor","childCount","countChildren","member","Person","forceExpand","idx","findIndex","el","setFamily","concat","nextChild","expanded","setExpanded","_useState5","_useState6","cache","setCache","_useState7","_useState8","authorized","generation","blur","Expander","ChildCount","Picture","Location","family_Date","Contact","newChild","String","title","href","baby","Date","l","toLowerCase","includes","getDescription","dt","diff","num","round0","formatDate","News","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","j","sortDate","displayDate","_","sortDates","DateItem","item","add","ScrollSpy","setChildren","scroll","active","list","pos","tops","top","offsetTop","sort","_tops","getCurrentId","window","scrollY","newChildren","isAncestor","isSibling","isChild","React","cloneElement","onscroll","useEffect","current","Sidebar","SearchBox","search","term","ExpandButton","toggleExpand","m","toString","currentClassName","NavItem","expandIcon","collapseIcon","Fragment","gen","cnt","App","setTerm","searchResults","setSearchResults","setTitle","_useState9","_useState10","setForceExpand","fam","t","Wrapper","react_router_dom","TabBar","tabs","react_router","path","Loading","to","activeClassName","ReactDOM","render"],"mappings":"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","file":"static/js/main.f6d0fc7f.chunk.js","sourcesContent":["//get data from backend\r\n\r\n/**\r\n * send/receive data from backend\r\n * \r\n * @param {string} endpoint \r\n * @param {object} data \r\n */\r\nexport async function getFetch(endpoint) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(endpoint, {\r\n        method: 'GET',\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"credentials\": \"include\"\r\n        }\r\n      }).then(r=> r.json()).then(r => resolve(r))\r\n      .catch(console.log);\r\n  });\r\n}\r\n\r\nexport async function postFetch(endpoint, data) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"credentials\": \"include\"\r\n        },\r\n        body: JSON.stringify(data)\r\n      }).then((r) => r.json()).then((r) => resolve(r))\r\n      .catch(console.log);\r\n  });\r\n}","// upload.js\r\nimport React, {useState} from 'react';\r\n\r\nexport function Uploader(props) {\r\n  var [dragover, setDragover]=useState(\"\");\r\n  var [uploading, setUploading]=useState(\"\");\r\n\r\n  function fileInputClick(e){\r\n    e.preventDefault();\r\n    setDragover(true);\r\n    document.getElementById('fileInput').click();\r\n  }\r\n\r\n  function onInputFile(e){\r\n    setDragover(false);\r\n    addFiles(e.target.files);\r\n  }\r\n\r\n  function onDrop(e){\r\n    e.preventDefault();\r\n    onNotHover();\r\n    var validFiles=[];\r\n\r\n    if(e.dataTransfer.items)// Use DataTransferItemList interface to access the file(s)\r\n      for (var i = 0; i < e.dataTransfer.items.length; i++) {\r\n        if (e.dataTransfer.items[i].kind === 'file'){\r\n          validFiles.push(e.dataTransfer.items[i].getAsFile());\r\n        }\r\n    }\r\n    else{ // Use DataTransfer interface to access the file(s)\r\n      for (i = 0; i < e.dataTransfer.files.length; i++){\r\n        validFiles.push(e.dataTransfer.files[i]);\r\n      }\r\n    }\r\n    if(validFiles.length){\r\n      addFiles(validFiles);\r\n    }\r\n  }\r\n\r\n  function addFiles(newFiles){\r\n    var goodFiles = [];\r\n\r\n    for (let i of newFiles) { //check if PDF\r\n      if( i.type===\"image/jpeg\" ){\r\n        goodFiles.push(i);\r\n        setUploading(true);  \r\n      }\r\n      else setDragover('flash-red'); //flash error indication\r\n    }\r\n    //add to formdata object\r\n    if(!goodFiles.length) return;\r\n\r\n    var uploadData = new FormData();\r\n\r\n    for(let f of goodFiles)\r\n      uploadData.append('file', f);\r\n\r\n    //create XHR object\r\n    let xhr = new XMLHttpRequest(),\r\n      method = 'POST',\r\n      url = '/api/image/'+props.id+\"/\"+(props.imageId+1);\r\n\r\n    xhr.open(method, url, true);\r\n\r\n    xhr.onload= function(e){\r\n      setUploading(false);\r\n      props.onChange(props.imageId+1);\r\n    }\r\n    xhr.send(uploadData);\r\n  }\r\n\r\n  function onHover(e){\r\n    e.preventDefault();\r\n    setDragover('dragover');\r\n  }\r\n  function onNotHover(){\r\n    setDragover('');\r\n  }\r\n\r\n  return(\r\n    <div className={\"fileDrop \"+dragover} onDragOver={onHover} onDrop={onDrop} onDragLeave={onNotHover} >\r\n      <input id=\"fileInput\" type=\"file\" className=\"hidden\" onChange={onInputFile}/>\r\n      <div className=\"uploadbox\" onClick={fileInputClick} > \r\n        {uploading \r\n        ? <i className=\"fa fa-spinner fa-pulse fa-3x fa-fw\"></i>\r\n        : <i className={\"fa fa-upload\"} /> \r\n        }\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","//edit.js\r\nimport React, {useState} from 'react';\r\nimport * as moment from 'moment';\r\nimport {postFetch} from './utilities.js';\r\nimport {Uploader} from './upload.js';\r\n\r\nexport function EditWindow({person, edit}){\r\n  if(!person) return null;\r\n  var [p, setPerson] = useState(person);\r\n\r\n  function close(){\r\n    edit(null);\r\n  }\r\n\r\n\r\n  function setValue(e){\r\n    let label = e.target.label || e.target.getAttribute('label');\r\n    let value = e.target.value;\r\n    p[label]=value;\r\n    setPerson({...p});\r\n  }\r\n  function save(){\r\n     console.log(p);\r\n     edit(p);\r\n     postFetch('/api/person', p);\r\n     close();\r\n  }\r\n\r\n  return(\r\n    <div className=\"modal is-active\">\r\n      <div className=\"modal-background\" onClick={close}></div>\r\n      <div className=\"modal-content\">\r\n        <section className=\"edit\">\r\n            <div className=\"edit-body\">\r\n               <div className=\"columns is-vcentered is-mobile\">\r\n                  <div className=\"column is-narrow\">\r\n                     <EditPicture id={p.id} name={p.name} imageId={p.imageId} onChange={setValue}/>\r\n                  </div>\r\n                  <div className=\"column\">\r\n                     <Input label=\"id\" value={p.id} onChange={setValue} disabled={true}/>\r\n                     <Input label=\"name\" value={p.name} onChange={setValue} />\r\n                     <Input label=\"location\" value={p.location} onChange={setValue} />\r\n                  </div>\r\n               </div>\r\n\r\n               <EditDates dates = {p.dates} onChange={setValue} />       \r\n\r\n               <EditContact contacts = {p.emails} onChange={setValue}/>\r\n\r\n               <div className=\"buttons is-right padded\">\r\n                  <button className=\"button is-primary\" onClick={save}>Save</button>\r\n                  <button className=\"button \" onClick={close}>Discard</button>\r\n               </div>\r\n            </div>\r\n        </section>\r\n      <button className=\"modal-close is-large\" aria-label=\"close\" onClick={close}></button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Input({label, value, onChange, disabled}){\r\n  return(\r\n    <div className=\"field is-horizontal\">\r\n      <div className=\"field-label is-normal\">\r\n        <label className=\"label\">{label}</label>\r\n      </div>\r\n      <div className=\"field-body\">\r\n        <div className=\"field\">\r\n          <p className=\"control\">\r\n            <input className=\"input is-small\" type=\"text\" label = {label} placeholder={label} value={value} onChange={onChange} disabled={disabled ? \"disabled\":\"\"}/>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction EditDates({dates, onChange}){\r\n   \r\n   function update({name, id, value}){\r\n      if (value===null && name===null)\r\n         dates.splice(id,1); //remove deleted item\r\n      else\r\n         dates[id][name] = value;\r\n\r\n      onChange({target: {label: \"dates\", value: [...dates]}});\r\n   }\r\n   function add(){\r\n      if(!dates) dates = [];\r\n      dates.push({description:'', date:''});\r\n      update({id:dates.length-1, name:\"description\", value:\"\"})\r\n   }\r\n   return(\r\n    <div className=\"list-editor\">\r\n       \r\n      <div className=\"list-title\">\r\n         <strong>Dates</strong>\r\n      </div>\r\n\r\n      <div className=\"list-items\">\r\n         {dates && dates.length ?\r\n            dates.map((d,i)=><DateInput date={d.date} description={d.description} onChange={update} id={i} key={\"date\"+i}/>)\r\n         : null}\r\n         <div className=\"buttons is-left\">\r\n            <button className=\"button is-small is-success\" onClick={add}><i className=\"fa fa-plus\"></i></button>\r\n         </div>\r\n      </div>\r\n    </div>\r\n   )\r\n}\r\nfunction DateInput({description, date, id, onChange}){\r\n\r\n   function update(e){\r\n      onChange({\r\n         id: id,\r\n         name: e.target.name,\r\n         value: e.target.value\r\n      });\r\n   }\r\n   function remove(){\r\n      onChange({\r\n         id:id,\r\n         name:null,\r\n         value: null\r\n      });\r\n   }\r\n\r\n   return(\r\n      <div className='person-date field is-horizontal'> \r\n         <div className=\"field-body\">\r\n            <div className=\"field\">\r\n               <p className=\"control has-icons-left\">\r\n                  <input className=\"input is-small\" value={description} name=\"description\" placeholder=\"description\"onChange={update}> \r\n                  </input>\r\n                  <span className=\"icon is-small is-left\">\r\n                     <i className=\"fa fa-info\"></i>\r\n                  </span>\r\n               </p>\r\n            </div>\r\n            <div className=\"field\">\r\n               <p className=\"control has-icons-left\">\r\n                  <input className=\"input is-small\" value={moment(date).format(\"YYYY-MM-DD\")} name=\"date\" type=\"date\" onChange={update}></input>\r\n                  <span className=\"icon is-small is-left\">\r\n                     <i className=\"fas fa-calendar\"></i>\r\n                  </span>\r\n               </p>\r\n            </div>\r\n            <div className=\"field\">\r\n               <p className=\"control \">\r\n                  <button className=\"button is-small\" onClick={remove}><i className=\"fa fa-trash\"></i></button>\r\n               </p>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\nfunction EditPicture(props){\r\n   var [img, setImg] = useState(\"/images/\"+props.id+\"_\"+props.imageId+\".jpg\");\r\n   function reload(imageId){\r\n      setImg(\"/images/\"+props.id+\"_\"+imageId+\".jpg\");\r\n      props.onChange({target:{\r\n         label: 'imageId',\r\n         value: imageId\r\n      }});\r\n   }\r\n\r\n   return(\r\n      <Uploader id={props.id} imageId={props.imageId} onChange={reload}>\r\n         <div className=\"edit-image\"> \r\n            <img src={img} alt={props.name}/> \r\n         </div>\r\n      </Uploader>\r\n   )\r\n}\r\n\r\nfunction EditContact({contacts,  onChange}){\r\n   function update({id, contact}){\r\n      if (contact===null)\r\n         contacts.splice(id,1); //remove deleted item\r\n      else\r\n         contacts[id]=contact; //set updated data\r\n      onChange({target:{\r\n         label: \"emails\",\r\n         value: contacts\r\n      }});\r\n   }\r\n   function add() {\r\n      if(!contacts) contacts = [];\r\n      update({id: contacts.length, contact: \"\"});\r\n   }\r\n   \r\n   return(\r\n    <div className=\"list-editor\">\r\n      <div className=\"list-title\">\r\n         <strong>Contact Info</strong>\r\n      </div>\r\n\r\n      <div className=\"list-items\">\r\n         {contacts && contacts.length ? \r\n            contacts.map((c,i)=><ContactInput contact={c} id={i} onChange={update} key={\"contact\"+i}/>)\r\n         : null}\r\n         <div className=\"buttons is-left\">\r\n            <button className=\"button is-small is-success\" onClick={add}><i className=\"fa fa-plus\"></i></button>\r\n         </div>\r\n      </div>\r\n    </div>\r\n   )\r\n}\r\nfunction ContactInput({contact, id, onChange}){\r\n   function update(e){\r\n      onChange({\r\n         id: id,\r\n         contact: e.target.value,\r\n      });\r\n   }\r\n   function remove(){\r\n      onChange({\r\n         id:id,\r\n         contact:null\r\n      });\r\n   }\r\n   return(\r\n      <div className='field'> \r\n         <div className=\"field-body\">\r\n            <div className=\"field\">\r\n               <p className=\"control has-icons-left\">\r\n                  <input className=\"input is-small\" type=\"email\" value={contact} placeholder=\"email\" onChange={update}>\r\n                  </input>\r\n                  <span className=\"icon is-small is-left\">\r\n                     <i className=\"fa fa-envelope\"></i>\r\n                  </span>\r\n               </p>\r\n            </div>\r\n            <div className=\"field\">\r\n               <p className=\"control \">\r\n                  <button className=\"button is-small\" onClick={remove}><i className=\"fa fa-trash\"></i></button>\r\n               </p>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   )\r\n}","//Inputs\r\nimport React, {useState} from 'react';\r\nimport * as moment from 'moment';\r\nimport {EditWindow} from './edit.js';\r\n\r\nexport function Directory(props){\r\n  var family = countChildren(props.family);\r\n  var [person, setPerson] = useState(null);\r\n\r\n  function edit(p){\r\n    if(p===null)\r\n      setPerson(null);\r\n    else{\r\n      let idx=family.findIndex(el=>el.id===p.id);\r\n      if(idx===-1)\r\n        props.setFamily([...family, p]);\r\n      else{\r\n        family[idx]=p;\r\n        props.setFamily(family);\r\n      }\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div className=\"directory\">\r\n      { family.map(member=> <Person person={member} key={member.id} forceExpand = {props.forceExpand} edit={setPerson}/> ) }\r\n      <EditWindow person={person} edit={edit}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Person({person, forceExpand, edit, nextChild}){\r\n  var [expanded, setExpanded] = useState(forceExpand);\r\n  var [cache, setCache] = useState(forceExpand);\r\n  var [authorized, setAuthorized] = useState(true);\r\n\r\n  //check whether force value has changed\r\n  if(forceExpand !== cache){\r\n    setExpanded(forceExpand);\r\n    setCache(forceExpand);\r\n  }\r\n\r\n  var toggleExpanded = ()=>{\r\n    setExpanded(!expanded);    \r\n  };\r\n  function newChild(){\r\n    let newChild = {\r\n      id: Number(person.id+String(person.childCount[0]+1)), \r\n      imageId: 0, name:\"\", location:\"\", dates:[]};\r\n    edit(newChild);\r\n  }\r\n\r\n  return(\r\n    <section className={\"person \" + generation(person.id) + (person.blur ? \" blur\": \"\") } id={person.id}>\r\n      <div className=\"person-title\" onClick={toggleExpanded}>\r\n        <span>\r\n          <Expander expanded={expanded} /> &nbsp;\r\n          {person.name}\r\n        </span>\r\n        <ChildCount childCount = {person.childCount} />\r\n      </div>\r\n      {expanded ?\r\n        <div className=\"person-body\">\r\n          <Picture id={person.id} name={person.name} imageId={person.imageId}/>\r\n          <div className=\"person-details\">\r\n            <Location location={person.location} />\r\n            <div className=\"person-dates\">\r\n              {person.dates.map(d=><Date date={d} key={d.date}/>)}\r\n            </div>            \r\n            \r\n            <Contact emails = {person.emails} />\r\n          </div>\r\n          {authorized ?\r\n          <div className=\"buttons is-right padded\">\r\n            <button className=\"button is-small editButton\" onClick={()=>edit(person)}><i className=\"fa fa-user-edit\"></i></button>\r\n            <button className=\"button is-small editButton\" onClick={newChild}><i className=\"fa fa-user-plus\"></i></button>\r\n          </div>\r\n          : null}\r\n          \r\n        </div>\r\n      : null }\r\n    </section>\r\n  );\r\n}\r\n\r\nfunction Expander({expanded}){\r\n  if(expanded)\r\n    return <i className=\"fa fa-caret-down\"></i> ;\r\n  else\r\n    return <i className=\"fa fa-caret-right\"></i> ;\r\n}\r\n\r\nfunction countChildren(family){\r\n  for(let i in family){\r\n\r\n    let c=0, gc=0, ggc=0;\r\n    let pid = family[i].id;\r\n\r\n    for(let s = Number(i)+1; s<family.length; s++){\r\n\r\n      let cid = family[s].id;\r\n      if(Math.floor(cid/10)===pid)       c++; //children\r\n      else if(Math.floor(cid/100)===pid)  gc++ //grandchildren\r\n      else if(Math.floor(cid/1000)===pid) ggc++; //great grandchildren\r\n\r\n    }\r\n    family[i].childCount = [c, gc, ggc];\r\n  }\r\n  return family;\r\n}\r\nfunction generation(id){\r\n  if(id===1)\r\n    return \"gen-0\";\r\n  if(id<19)\r\n    return \"gen-1\";\r\n  if(id<199)\r\n    return \"gen-2\";\r\n  if(id<1999)\r\n    return \"gen-3\";\r\n  if(id<1999)\r\n    return \"gen-4\";\r\n}\r\n\r\n\r\n\r\nfunction Location (props){\r\n  if(!props.location)\r\n    return null;\r\n  return(\r\n    <div className=\"person-location\">\r\n      <i title=\"Current Location\" className=\"fa fa-map-marker-alt\"></i> &nbsp;\r\n      <a href={\"https://google.com/maps/search/\"+props.location}>\r\n        {props.location}\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\nexport function Picture(props){\r\n  return(\r\n    <div className=\"person-image\"> \r\n      <img src={`/images/${props.id}_${props.imageId ||'0'}.jpg`} alt={props.name}/> \r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Contact(props){\r\n  if(!props.emails || !props.emails.length )\r\n    return null;\r\n  return(\r\n    <div className=\"person-contact\">\r\n      {props.emails.map(e=><p className='person-email' key={e}><i className=\"fa fa-envelope\"></i><a href={'mailto:'+e}> {e} </a></p>)}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ChildCount(props){\r\n  if(!props.childCount) return null;\r\n\r\n  var baby = <i className='fa fa-baby'></i>;\r\n  return(\r\n    <span className=\"child-count\">\r\n      {props.childCount[0] ? \r\n        <span title='children'><strong>{baby} {props.childCount[0]} </strong></span> \r\n        : null}\r\n      {props.childCount[1] ? \r\n        <span title='grandchildren'><strong>{baby}{baby} {props.childCount[1]} </strong></span> \r\n        : null}\r\n      {props.childCount[2] ? \r\n        <span title='great grandchildren'><strong>{baby}{baby}{baby}  {props.childCount[2]} </strong></span> \r\n        : null}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction Date(props){\r\n  if(!props || !props.date || !props.date.description || !props.date.date)\r\n    return null;\r\n\r\n  return(\r\n    <div className='person-date'> \r\n      {getDescription(props.date.description)} {formatDate(props.date.date)}\r\n    </div>\r\n  );\r\n}\r\n\r\n//gets icon for description\r\nfunction getDescription(d){\r\n  let l = d.toLowerCase();\r\n  if(l.includes(\"birthday\") || l.includes(\"bday\") || l.includes(\"born\") )\r\n    return <i title={d} className='fa fa-birthday-cake'></i>;\r\n  if(l.includes(\"married\") || l.includes(\"wedding\") || l.includes(\"anniversary\"))\r\n    return <i title={d} className='fas fa-ring'></i>;\r\n}\r\n\r\n\r\nfunction formatDate(dt){\r\n  dt = moment(dt);\r\n\r\n  var length = moment().diff(dt, 'months');\r\n\r\n  //only show decimal for less than 3 years out\r\n  if(length<36)\r\n    length = round1(length/12);\r\n  else\r\n    length = round0(length/12);\r\n\r\n  return `${dt.format(\"M/D/YYYY\")} (${length})`;\r\n}\r\n\r\nfunction round0(num){\r\n  return Math.floor(num);\r\n}\r\nfunction round1(num){\r\n  return(Math.floor(num*10)/10);\r\n}\r\n\r\n","import React from 'react';\r\nimport * as moment from 'moment';\r\nimport {Picture} from './family.js';\r\nimport * as _ from 'lodash';\r\n\r\nexport function News(props){\r\n  \r\n  return(\r\n    <div className=\"news\">\r\n      {sortDates(props.family).map((d)=><DateItem item={d} key={d.id+\"_\"+d.date} />)}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction sortDates(family){\r\n  var dates = [];\r\n\r\n  for(let i of family){\r\n    for(let j of i.dates){\r\n      let sortDate = Number(moment(j.date).format(\"DDD\"));\r\n\r\n      if(sortDate < Number(moment().format(\"DDD\"))-30)\r\n         sortDate+=366;\r\n\r\n      dates.push({\r\n        displayDate: moment(j.date).format(\"MMMM D\"),\r\n        date: moment(j.date),\r\n        sortDate: sortDate,\r\n        description: j.description,\r\n        name: i.name,\r\n        id: i.id,\r\n        imageId: i.imageId,\r\n        blur: i.blur\r\n      });\r\n    }\r\n  }\r\n  return _.sortBy(dates, [(i)=>i.sortDate]); //return sorted list\r\n}\r\n\r\nfunction DateItem({item}){\r\n\r\n   return(\r\n      <div className={\"news-item \" + (item.blur ?\"blur\":\"\")}>\r\n         <div className=\"news-item-head\">\r\n            <span>{item.displayDate}</span>\r\n            <span>{item.name}</span>\r\n         </div>\r\n         <div className=\"news-item-body\">\r\n            {item.description.toLowerCase().includes('married') \r\n            ? item.description + \": \"+ moment().add(335, 'days').diff(item.date, 'years') + \" years\"\r\n            : item.description + \": \" + moment().add(335, 'days').diff(item.date, 'years') }\r\n            <Picture id={item.id} imageId={item.imageId}/>\r\n         </div>\r\n      </div>\r\n   );\r\n}","//scrollspy\r\nimport React, {useState, useEffect} from 'react';\r\n\r\nexport function ScrollSpy(props){\r\n   var [children, setChildren] = useState(props.children);\r\n   window.onscroll= scroll;\r\n   \r\n   useEffect(()=>scroll(),[]); //initialize scrollspy\r\n   \r\n   function scroll(){\r\n      let idList = props.children.map(c=>c.props.id);\r\n      let pos = window.scrollY;\r\n      let id = getCurrentId(idList, pos);\r\n      let active;\r\n      let newChildren = [];\r\n      for(let i of props.children){\r\n         active = i.props.id===id;\r\n         if(isAncestor(id, i.props.id) || isSibling(id, i.props.id) || isChild(id, i.props.id))\r\n            newChildren.push(React.cloneElement(i, {active:active}));\r\n      }\r\n      setChildren(newChildren);\r\n   };\r\n   return(\r\n      <div className=\"family-map\">\r\n         {children}\r\n      </div>\r\n   );\r\n}\r\n\r\n// determine if an id is in the ancestral lineage of current (includes current)\r\nfunction isAncestor(id, current){\r\n   while(id>0){\r\n      if(current===id) return true;\r\n      id=Math.floor(id/10);\r\n   }\r\n   return false;\r\n}\r\n\r\n//check if they have the same parent\r\nfunction isSibling(id, current){\r\n   return Math.floor(id/10)===Math.floor(current/10);\r\n}\r\n\r\nfunction isChild(id, current){\r\n   return Math.floor(current/10)===id;\r\n}\r\n\r\n//find the currently scrolled-top item\r\nfunction getCurrentId(list, pos){\r\n   var tops = [];\r\n   for(let i of list){\r\n      if(document.getElementById(i))\r\n         tops.push({\r\n            id: i,\r\n            top: document.getElementById(i).offsetTop\r\n         });\r\n   }\r\n\r\n   tops.sort((i,j)=>i.pos-j.pos);\r\n\r\n   for(let i of tops)\r\n      if(i.top>=pos)\r\n         return(i.id)\r\n}","import React from 'react';\r\nimport {ScrollSpy} from './scrollspy.js';\r\n\r\nexport function Sidebar(props){\r\n\r\n  return(\r\n    <aside className=\"navbar\">\r\n      <SearchBox onChange={props.search} term={props.term}/>\r\n      <ExpandButton expanded={props.expanded} toggleExpand={props.toggleExpand}/>\r\n      <ScrollSpy items={ props.family.map(m=>m.id.toString()) } currentClassName=\"active\" >\r\n        {props.family.map(m=><NavItem name={m.name} id={m.id} key={m.id}/>)}\r\n      </ScrollSpy>\r\n    </aside>\r\n  );\r\n}\r\nfunction ExpandButton(props){\r\n  var expandIcon = <i className=\"fa fa-expand-arrows-alt\"></i>;\r\n  var collapseIcon = <i className=\"fa fa-compress-arrows-alt\"></i>;\r\n  return(\r\n    <React.Fragment>\r\n    {props.expanded \r\n      ? <button title=\"collapse all\" className=\"button is-small is-fullwidth\" onClick={props.toggleExpand}> {collapseIcon} &nbsp; Collapse All</button>\r\n      : <button title=\"expand all\" className=\"button is-small is-fullwidth\" onClick={props.toggleExpand}> {expandIcon} &nbsp;Expand All </button>\r\n    } \r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction SearchBox(props){\r\n  return(\r\n    <input className=\"searchbox input is-small\" type=\"search\" placeholder=\"search\" value={props.term} onChange={(e)=>props.onChange(e.target.value)}></input>\r\n  );\r\n}\r\n\r\nfunction NavItem(props){\r\n  let gen=0;\r\n  \r\n  for(let cnt=props.id; cnt>9; cnt=cnt/10)\r\n    gen++;\r\n\r\n  return(\r\n    <div className={(props.active ? \"active\" : \"\") + \" gen-\"+gen}><a href={'#'+props.id}> {props.name}</a></div>\r\n  )\r\n}","//LittleFoot Library front-end\r\n\r\nimport ReactDOM from 'react-dom';\r\nimport React, {useState, useEffect} from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch, Route,\r\n  Link, NavLink\r\n} from \"react-router-dom\";\r\n\r\nimport {Directory} from './family.js';\r\nimport {getFetch} from './utilities.js';\r\nimport {News} from './news.js';\r\nimport {Sidebar} from './sidebar.js';\r\nimport './family.sass';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n//main app component\r\nexport default function App(props){\r\n  \r\n  var [family, setFamily] = useState(null);\r\n  var [term, setTerm] = useState('');\r\n  var [searchResults, setSearchResults] = useState(null);\r\n  var [title, setTitle] = useState(null);\r\n  var [forceExpand, setForceExpand] = useState(true);\r\n\r\n  function searchTerm(t){\r\n    setSearchResults(search(t,family));\r\n    setTerm(t);\r\n  }\r\n\r\n  useEffect(()=>{\r\n    getFetch('/api/family')\r\n    .then(fam=>{\r\n      if(fam){\r\n        setFamily(fam);\r\n        setSearchResults(fam);\r\n      }\r\n    });\r\n    getFetch('/api/name')\r\n    .then(t=>{\r\n      if(t){\r\n        setTitle(t.title);\r\n        document.title=t.title;\r\n      } \r\n    });\r\n  },[]);\r\n\r\n  return(\r\n    <Wrapper>\r\n      <h1 className=\"title is-3 has-text-centered has-text-primary\"><a href =\"/\">{title}</a></h1>\r\n        <Router>\r\n          <React.Fragment>\r\n            <TabBar tabs = {[\"Directory\", \"News\"]} />\r\n\r\n            {searchResults ?\r\n                <Switch>\r\n                  <Route path=\"/directory\">\r\n                    <div className=\"directory-container\">\r\n                      <Sidebar search = {searchTerm} term={term} family={searchResults} expanded = {forceExpand} toggleExpand={()=>setForceExpand(!forceExpand)}/>\r\n                      <Directory family={searchResults} forceExpand={forceExpand} setFamily={setFamily}/>\r\n                    </div>\r\n                  </Route>\r\n                  <Route path=\"/news\">\r\n                    <News family={searchResults} />\r\n                  </Route>\r\n                </Switch>\r\n            : <Loading /> }\r\n          </React.Fragment>\r\n        </Router>\r\n    </Wrapper> \r\n  );\r\n}\r\n\r\nfunction TabBar(props){\r\n  return(\r\n    <div className=\"tabs is-centered\">\r\n      <ul>\r\n        {props.tabs.map((t)=>\r\n          <li key={t} className=\"\">\r\n            <NavLink to={\"/\"+t} activeClassName=\"is-active\">{t}</NavLink>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\nfunction Loading(props){\r\n    return(<div className=\"is-loading\"> Loading ... </div>);\r\n  \r\n}\r\n\r\nfunction Wrapper(props){\r\n  return(\r\n    <div className=\"main\">\r\n      {props.children}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n/**\r\n * sets blur: true on non-hit family members\r\n * @param {string} term \r\n * @param {Array} family \r\n */\r\nfunction search(term, family){\r\n  for(let i of family){\r\n    if(!term){ //if the term is blank, just set everything to unblur\r\n      i.blur = false;\r\n      continue;\r\n    }\r\n    i.blur=true;\r\n    for(let p in i){\r\n      if(i[p].toString().toLowerCase().includes(term.toLowerCase())){ //not a deep search\r\n        i.blur=false;\r\n      }\r\n      if(!i.blur) break;\r\n    }\r\n  }\r\n  return family;\r\n}"],"sourceRoot":""}