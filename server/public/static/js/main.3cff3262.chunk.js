(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,a,t){e.exports=t(39)},33:function(e,a,t){},39:function(e,a,t){"use strict";t.r(a);var n=t(2),l=t(21),r=t.n(l),c=t(0),i=t.n(c),s=t(14),o=t(5),m=t(11),u=t(4),d=t(25),f=t(10),p=t.n(f),E=t(13);function v(e){return h.apply(this,arguments)}function h(){return(h=Object(E.a)(p.a.mark(function e(a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){fetch(a,{method:"GET",headers:{"Content-Type":"application/json",credentials:"include"}}).then(function(e){return e.json()}).then(function(a){return e(a)}).catch(console.log)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(){return(g=Object(E.a)(p.a.mark(function e(a,t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){fetch(a,{method:"POST",headers:{"Content-Type":"application/json",credentials:"include"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(a){return e(a)}).catch(console.log)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(e){var a=Object(c.useState)(""),t=Object(n.a)(a,2),l=t[0],r=t[1],s=Object(c.useState)(""),o=Object(n.a)(s,2),m=o[0],u=o[1];function d(a){var t=[],n=!0,l=!1,c=void 0;try{for(var i,s=a[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;"image/jpeg"===o.type?(t.push(o),u(!0)):r("flash-red")}}catch(h){l=!0,c=h}finally{try{n||null==s.return||s.return()}finally{if(l)throw c}}if(t.length){for(var m=new FormData,d=0,f=t;d<f.length;d++){var p=f[d];m.append("file",p)}var E=new XMLHttpRequest,v="/api/image/"+e.id+"/"+(e.imageId+1);E.open("POST",v,!0),E.onload=function(a){u(!1),e.onChange(e.imageId+1)},E.send(m)}}function f(){r("")}return i.a.createElement("div",{className:"fileDrop "+l,onDragOver:function(e){e.preventDefault(),r("dragover")},onDrop:function(e){e.preventDefault(),f();var a=[];if(e.dataTransfer.items)for(var t=0;t<e.dataTransfer.items.length;t++)"file"===e.dataTransfer.items[t].kind&&a.push(e.dataTransfer.items[t].getAsFile());else for(t=0;t<e.dataTransfer.files.length;t++)a.push(e.dataTransfer.files[t]);a.length&&d(a)},onDragLeave:f},i.a.createElement("input",{id:"fileInput",type:"file",className:"hidden",onChange:function(e){r(!1),d(e.target.files)}}),i.a.createElement("div",{className:"uploadbox",onClick:function(e){e.preventDefault(),r(!0),document.getElementById("fileInput").click()}},m?i.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}):i.a.createElement("i",{className:"fa fa-upload"}),e.children))}function N(e){var a=e.person,t=e.edit;if(!a)return null;var l=Object(c.useState)(a),r=Object(n.a)(l,2),s=r[0],o=r[1];function m(){t(null)}function u(e){var a=e.target.label||e.target.getAttribute("label"),t=e.target.value;s[a]=t,o(Object(d.a)({},s))}return i.a.createElement("div",{className:"modal is-active"},i.a.createElement("div",{className:"modal-background",onClick:m}),i.a.createElement("div",{className:"modal-content"},i.a.createElement("section",{className:"edit"},i.a.createElement("div",{className:"edit-body"},i.a.createElement("div",{className:"columns is-vcentered is-mobile"},i.a.createElement("div",{className:"column is-narrow"},i.a.createElement(j,{id:s.id,name:s.name,imageId:s.imageId,onChange:u})),i.a.createElement("div",{className:"column"},i.a.createElement(y,{label:"id",value:s.id,onChange:u,disabled:!0}),i.a.createElement(y,{label:"name",value:s.name,onChange:u}),i.a.createElement(y,{label:"location",value:s.location,onChange:u}))),i.a.createElement(C,{dates:s.dates,onChange:u}),i.a.createElement(O,{contacts:s.emails,onChange:u}),i.a.createElement("div",{className:"buttons is-right padded"},i.a.createElement("button",{className:"button is-primary",onClick:function(){console.log(s),t(s),function(e,a){g.apply(this,arguments)}("/api/person",s),m()}},"Save"),i.a.createElement("button",{className:"button ",onClick:m},"Discard")))),i.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:m})))}function y(e){var a=e.label,t=e.value,n=e.onChange,l=e.disabled;return i.a.createElement("div",{className:"field is-horizontal"},i.a.createElement("div",{className:"field-label is-normal"},i.a.createElement("label",{className:"label"},a)),i.a.createElement("div",{className:"field-body"},i.a.createElement("div",{className:"field"},i.a.createElement("p",{className:"control"},i.a.createElement("input",{className:"input is-small",type:"text",label:a,placeholder:a,value:t,onChange:n,disabled:l?"disabled":""})))))}function C(e){var a=e.dates,t=e.onChange;function n(e){var n=e.name,l=e.id,r=e.value;null===r&&null===n?a.splice(l,1):a[l][n]=r,t({target:{label:"dates",value:Object(m.a)(a)}})}return i.a.createElement("div",{className:"list-editor"},i.a.createElement("div",{className:"list-title"},i.a.createElement("strong",null,"Dates")),i.a.createElement("div",{className:"list-items"},a&&a.length?a.map(function(e,a){return i.a.createElement(w,{date:e.date,description:e.description,onChange:n,id:a,key:"date"+a})}):null,i.a.createElement("div",{className:"buttons is-left"},i.a.createElement("button",{className:"button is-small is-success",onClick:function(){a||(a=[]),a.push({description:"",date:""}),n({id:a.length-1,name:"description",value:""})}},i.a.createElement("i",{className:"fa fa-plus"})))))}function w(e){var a=e.description,t=e.date,n=e.id,l=e.onChange;function r(e){l({id:n,name:e.target.name,value:e.target.value})}return i.a.createElement("div",{className:"person-date field is-horizontal"},i.a.createElement("div",{className:"field-body"},i.a.createElement("div",{className:"field"},i.a.createElement("p",{className:"control has-icons-left"},i.a.createElement("input",{className:"input is-small",value:a,name:"description",placeholder:"description",onChange:r}),i.a.createElement("span",{className:"icon is-small is-left"},i.a.createElement("i",{className:"fa fa-info"})))),i.a.createElement("div",{className:"field"},i.a.createElement("p",{className:"control has-icons-left"},i.a.createElement("input",{className:"input is-small",value:u(t).format("YYYY-MM-DD"),name:"date",type:"date",onChange:r}),i.a.createElement("span",{className:"icon is-small is-left"},i.a.createElement("i",{className:"fas fa-calendar"})))),i.a.createElement("div",{className:"field"},i.a.createElement("p",{className:"control "},i.a.createElement("button",{className:"button is-small",onClick:function(){l({id:n,name:null,value:null})}},i.a.createElement("i",{className:"fa fa-trash"}))))))}function j(e){var a=Object(c.useState)("/images/"+e.id+"_"+e.imageId+".jpg"),t=Object(n.a)(a,2),l=t[0],r=t[1];return i.a.createElement(b,{id:e.id,imageId:e.imageId,onChange:function(a){r("/images/"+e.id+"_"+a+".jpg"),e.onChange({target:{label:"imageId",value:a}})}},i.a.createElement("div",{className:"edit-image"},i.a.createElement("img",{src:l,alt:e.name})))}function O(e){var a=e.contacts,t=e.onChange;function n(e){var n=e.id,l=e.contact;null===l?a.splice(n,1):a[n]=l,t({target:{label:"emails",value:a}})}return i.a.createElement("div",{className:"list-editor"},i.a.createElement("div",{className:"list-title"},i.a.createElement("strong",null,"Contact Info")),i.a.createElement("div",{className:"list-items"},a&&a.length?a.map(function(e,a){return i.a.createElement(x,{contact:e,id:a,onChange:n,key:"contact"+a})}):null,i.a.createElement("div",{className:"buttons is-left"},i.a.createElement("button",{className:"button is-small is-success",onClick:function(){a||(a=[]),n({id:a.length,contact:""})}},i.a.createElement("i",{className:"fa fa-plus"})))))}function x(e){var a=e.contact,t=e.id,n=e.onChange;return i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"field-body"},i.a.createElement("div",{className:"field"},i.a.createElement("p",{className:"control has-icons-left"},i.a.createElement("input",{className:"input is-small",type:"email",value:a,placeholder:"email",onChange:function(e){n({id:t,contact:e.target.value})}}),i.a.createElement("span",{className:"icon is-small is-left"},i.a.createElement("i",{className:"fa fa-envelope"})))),i.a.createElement("div",{className:"field"},i.a.createElement("p",{className:"control "},i.a.createElement("button",{className:"button is-small",onClick:function(){n({id:t,contact:null})}},i.a.createElement("i",{className:"fa fa-trash"}))))))}var k=Number(function(e){var a=document.cookie.match("(^|[^;]+)\\s*"+e+"\\s*=\\s*([^;]+)");return a?a.pop():""}("level"));function S(e){var a=function(e){for(var a in e){for(var t=0,n=0,l=0,r=e[a].id,c=Number(a)+1;c<e.length;c++){var i=e[c].id;Math.floor(i/10)===r?t++:Math.floor(i/100)===r?n++:Math.floor(i/1e3)===r&&l++}e[a].childCount=[t,n,l]}return e}(e.family),t=Object(c.useState)(null),l=Object(n.a)(t,2),r=l[0],s=l[1];return i.a.createElement("div",{className:"directory"},a.map(function(a){return i.a.createElement(D,{person:a,key:a.id,forceExpand:e.forceExpand,edit:s})}),i.a.createElement(N,{person:r,edit:function(t){if(null===t)s(null);else{var n=a.findIndex(function(e){return e.id===t.id});-1===n?e.setFamily([].concat(Object(m.a)(a),[t])):(a[n]=t,e.setFamily(a))}}}))}function D(e){var a=e.person,t=e.forceExpand,l=e.edit,r=(e.nextChild,Object(c.useState)(t)),s=Object(n.a)(r,2),o=s[0],m=s[1],u=Object(c.useState)(t),d=Object(n.a)(u,2),f=d[0],p=d[1];t!==f&&(m(t),p(t));return i.a.createElement("section",{className:"person "+M(a.id)+(a.blur?" blur":""),id:a.id},i.a.createElement("div",{className:"person-title",onClick:function(){m(!o)}},i.a.createElement("span",null,i.a.createElement(I,{expanded:o})," \xa0",a.name),i.a.createElement(B,{childCount:a.childCount})),o?i.a.createElement("div",{className:"person-body"},i.a.createElement(Y,{id:a.id,name:a.name,imageId:a.imageId}),i.a.createElement("div",{className:"person-details"},i.a.createElement(T,{location:a.location}),i.a.createElement("div",{className:"person-dates"},a.dates.map(function(e){return i.a.createElement(F,{date:e,key:e.date})})),i.a.createElement(L,{emails:a.emails})),function(e,a){for(;e>0;){if(a===e)return!0;e=Math.floor(e/10)}return!1}(a.id,k)?i.a.createElement("div",{className:"buttons is-right padded"},i.a.createElement("button",{className:"button is-small editButton",onClick:function(){return l(a)}},i.a.createElement("i",{className:"fa fa-user-edit"})),i.a.createElement("button",{className:"button is-small editButton",onClick:function(){var e={id:Number(a.id+String(a.childCount[0]+1)),imageId:0,name:"",location:"",dates:[]};l(e)}},i.a.createElement("i",{className:"fa fa-user-plus"}))):null):null)}function I(e){return e.expanded?i.a.createElement("i",{className:"fa fa-caret-down"}):i.a.createElement("i",{className:"fa fa-caret-right"})}function M(e){return 1===e?"gen-0":e<19?"gen-1":e<199?"gen-2":e<1999?"gen-3":e<1999?"gen-4":void 0}function T(e){return e.location?i.a.createElement("div",{className:"person-location"},i.a.createElement("i",{title:"Current Location",className:"fa fa-map-marker-alt"})," \xa0",i.a.createElement("a",{href:"https://google.com/maps/search/"+e.location},e.location)):null}function Y(e){return i.a.createElement("div",{className:"person-image"},i.a.createElement("img",{src:"/images/".concat(e.id,"_").concat(e.imageId||"0",".jpg"),alt:e.name}))}function L(e){return e.emails&&e.emails.length?i.a.createElement("div",{className:"person-contact"},e.emails.map(function(e){return i.a.createElement("p",{className:"person-email",key:e},i.a.createElement("i",{className:"fa fa-envelope"}),i.a.createElement("a",{href:"mailto:"+e}," ",e," "))})):null}function B(e){if(!e.childCount)return null;var a=i.a.createElement("i",{className:"fa fa-baby"});return i.a.createElement("span",{className:"child-count"},e.childCount[0]?i.a.createElement("span",{title:"children"},i.a.createElement("strong",null,a," ",e.childCount[0]," ")):null,e.childCount[1]?i.a.createElement("span",{title:"grandchildren"},i.a.createElement("strong",null,a,a," ",e.childCount[1]," ")):null,e.childCount[2]?i.a.createElement("span",{title:"great grandchildren"},i.a.createElement("strong",null,a,a,a,"  ",e.childCount[2]," ")):null)}function F(e){return e&&e.date&&e.date.description&&e.date.date?i.a.createElement("div",{className:"person-date"},function(e){var a=e.toLowerCase();if(a.includes("birthday")||a.includes("bday")||a.includes("born"))return i.a.createElement("i",{title:e,className:"fa fa-birthday-cake"});if(a.includes("married")||a.includes("wedding")||a.includes("anniversary"))return i.a.createElement("i",{title:e,className:"fas fa-ring"})}(e.date.description)," ",function(e){e=u(e);var a=u().diff(e,"months");a<36?(t=a/12,a=Math.floor(10*t)/10):a=function(e){return Math.floor(e)}(a/12);var t;return"".concat(e.format("M/D/YYYY")," (").concat(a,")")}(e.date.date)):null}var A=t(22);function P(e){return i.a.createElement("div",{className:"news"},function(e){var a=[],t=!0,n=!1,l=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var i=r.value,s=!0,o=!1,m=void 0;try{for(var d,f=i.dates[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value,E=Number(u(p.date).format("DDD"));E<Number(u().format("DDD"))-30&&(E+=366),a.push({displayDate:u(p.date).format("MMMM D"),date:u(p.date),sortDate:E,description:p.description,name:i.name,id:i.id,imageId:i.imageId,blur:i.blur})}}catch(v){o=!0,m=v}finally{try{s||null==f.return||f.return()}finally{if(o)throw m}}}}catch(v){n=!0,l=v}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}return A.sortBy(a,[function(e){return e.sortDate}])}(e.family).map(function(e){return i.a.createElement(_,{item:e,key:e.id+"_"+e.date})}))}function _(e){var a=e.item;return i.a.createElement("div",{className:"news-item "+(a.blur?"blur":"")},i.a.createElement("div",{className:"news-item-head"},i.a.createElement("span",null,a.displayDate),i.a.createElement("span",null,a.name)),i.a.createElement("div",{className:"news-item-body"},a.description.toLowerCase().includes("married")?a.description+": "+u().add(335,"days").diff(a.date,"years")+" years":a.description+": "+u().add(335,"days").diff(a.date,"years"),i.a.createElement(Y,{id:a.id,imageId:a.imageId})))}function J(e){var a=Object(c.useState)(e.children),t=Object(n.a)(a,2),l=t[0],r=t[1];function s(){var a,t=function(e,a){var t=[],n=!0,l=!1,r=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var s=c.value;document.getElementById(s)&&t.push({id:s,top:document.getElementById(s).offsetTop})}}catch(d){l=!0,r=d}finally{try{n||null==i.return||i.return()}finally{if(l)throw r}}t.sort(function(e,a){return e.pos-a.pos});for(var o=0,m=t;o<m.length;o++){var u=m[o];if(u.top>=a)return u.id}}(e.children.map(function(e){return e.props.id}),window.scrollY),n=[],l=!0,c=!1,s=void 0;try{for(var o,m=e.children[Symbol.iterator]();!(l=(o=m.next()).done);l=!0){var u=o.value;a=u.props.id===t,(z(t,u.props.id)||q(t,u.props.id)||G(t,u.props.id))&&n.push(i.a.cloneElement(u,{active:a}))}}catch(d){c=!0,s=d}finally{try{l||null==m.return||m.return()}finally{if(c)throw s}}r(n)}return window.onscroll=s,Object(c.useEffect)(function(){return s()},[]),i.a.createElement("div",{className:"family-map"},l)}function z(e,a){for(;e>0;){if(a===e)return!0;e=Math.floor(e/10)}return!1}function q(e,a){return Math.floor(e/10)===Math.floor(a/10)}function G(e,a){return Math.floor(a/10)===e}function H(e){return i.a.createElement("aside",{className:"navbar"},i.a.createElement(X,{onChange:e.search,term:e.term}),i.a.createElement(R,{expanded:e.expanded,toggleExpand:e.toggleExpand}),i.a.createElement(J,{items:e.family.map(function(e){return e.id.toString()}),currentClassName:"active"},e.family.map(function(e){return i.a.createElement(K,{name:e.name,id:e.id,key:e.id})})))}function R(e){var a=i.a.createElement("i",{className:"fa fa-expand-arrows-alt"}),t=i.a.createElement("i",{className:"fa fa-compress-arrows-alt"});return i.a.createElement(i.a.Fragment,null,e.expanded?i.a.createElement("button",{title:"collapse all",className:"button is-small is-fullwidth",onClick:e.toggleExpand}," ",t," \xa0 Collapse All"):i.a.createElement("button",{title:"expand all",className:"button is-small is-fullwidth",onClick:e.toggleExpand}," ",a," \xa0Expand All "))}function X(e){return i.a.createElement("input",{className:"searchbox input is-small",type:"search",placeholder:"search",value:e.term,onChange:function(a){return e.onChange(a.target.value)}})}function K(e){for(var a=0,t=e.id;t>9;t/=10)a++;return i.a.createElement("div",{className:(e.active?"active":"")+" gen-"+a},i.a.createElement("a",{href:"#"+e.id}," ",e.name))}t(33);function Q(e){var a=Object(c.useState)(null),t=Object(n.a)(a,2),l=t[0],r=t[1],m=Object(c.useState)(""),u=Object(n.a)(m,2),d=u[0],f=u[1],p=Object(c.useState)(null),E=Object(n.a)(p,2),h=E[0],g=E[1],b=Object(c.useState)(null),N=Object(n.a)(b,2),y=N[0],C=N[1],w=Object(c.useState)(!0),j=Object(n.a)(w,2),O=j[0],x=j[1];return Object(c.useEffect)(function(){v("/api/family").then(function(e){e&&(r(e),g(e))}),v("/api/name").then(function(e){e&&(C(e.title),document.title=e.title)})},[]),i.a.createElement(W,null,i.a.createElement("h1",{className:"title is-3 has-text-centered has-text-primary"},i.a.createElement("a",{href:"/"},y)),i.a.createElement(s.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement(U,{tabs:["Directory","News"]}),h?i.a.createElement(o.c,null,i.a.createElement(o.a,{path:"/directory"},i.a.createElement("div",{className:"directory-container"},i.a.createElement(H,{search:function(e){g(function(e,a){var t=!0,n=!1,l=void 0;try{for(var r,c=a[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var i=r.value;if(e){for(var s in i.blur=!0,i)if(i[s].toString().toLowerCase().includes(e.toLowerCase())&&(i.blur=!1),!i.blur)break}else i.blur=!1}}catch(o){n=!0,l=o}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}return a}(e,l)),f(e)},term:d,family:h,expanded:O,toggleExpand:function(){return x(!O)}}),i.a.createElement(S,{family:h,forceExpand:O,setFamily:r}))),i.a.createElement(o.a,{path:"/news"},i.a.createElement(P,{family:h}))):i.a.createElement(V,null))))}function U(e){return i.a.createElement("div",{className:"tabs is-centered"},i.a.createElement("ul",null,e.tabs.map(function(e){return i.a.createElement("li",{key:e,className:""},i.a.createElement(s.b,{to:"/"+e,activeClassName:"is-active"},e))})))}function V(e){return i.a.createElement("div",{className:"is-loading"}," Loading ... ")}function W(e){return i.a.createElement("div",{className:"main"},e.children)}t.d(a,"default",function(){return Q}),r.a.render(i.a.createElement(Q,null),document.getElementById("root"))}},[[26,2,1]]]);
//# sourceMappingURL=main.3cff3262.chunk.js.map