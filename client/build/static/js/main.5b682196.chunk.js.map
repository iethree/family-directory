{"version":3,"sources":["utilities.js","upload.js","edit.js","family.js","news.js","stats.js","scrollspy.js","sidebar.js","index.js"],"names":["getFetch","_x","_getFetch","apply","this","arguments","_callee","endpoint","regenerator_default","a","wrap","_context","prev","next","abrupt","Promise","resolve","reject","fetch","method","headers","Content-Type","credentials","then","r","json","catch","console","log","stop","_callee2","data","_context2","body","JSON","stringify","Uploader","props","_useState","useState","_useState2","Object","slicedToArray","dragover","setDragover","_useState3","_useState4","uploading","setUploading","addFiles","newFiles","goodFiles","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","i","value","type","push","err","return","length","uploadData","FormData","_i","_goodFiles","f","append","xhr","XMLHttpRequest","url","id","imageId","open","onload","e","onChange","send","onNotHover","react_default","createElement","className","onDragOver","preventDefault","onDrop","validFiles","dataTransfer","items","kind","getAsFile","files","onDragLeave","target","onClick","document","getElementById","click","children","EditWindow","_ref","person","edit","p","setPerson","close","setValue","label","getAttribute","objectSpread","EditPicture","name","Input","disabled","location","EditDates","dates","EditContact","contacts","emails","_x2","_x3","_postFetch","postFetch","aria-label","_ref2","placeholder","_ref3","update","_ref4","splice","toConsumableArray","map","d","DateInput","date","description","key","_ref5","moment","format","img","setImg","src","alt","_ref6","_ref7","contact","c","ContactInput","_ref8","UID","Number","val","cookie","match","pop","getCookie","Directory","family","gc","ggc","pid","s","cid","Math","floor","childCount","countChildren","member","Person","forceExpand","idx","findIndex","el","window","reload","setFamily","nextChild","expanded","setExpanded","_useState5","_useState6","cache","setCache","generation","blur","Expander","ChildCount","Picture","Location","family_Date","Contact","current","isAncestor","newChild","String","title","href","concat","baby","Date","l","toLowerCase","includes","getDescription","dt","diff","num","round0","formatDate","News","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","j","sortDate","displayDate","_","sortDates","DateItem","item","lib","to","add","Stats","counts","stats","isMarried","getGen","countFamily","total","reduce","b","g","Fragment","desc","ScrollSpy","setChildren","scroll","active","list","pos","tops","top","offsetTop","sort","_tops","getCurrentId","scrollY","newChildren","isSibling","isChild","React","cloneElement","onscroll","useEffect","Sidebar","SearchBox","search","term","ExpandButton","toggleExpand","m","toString","currentClassName","NavItem","expandIcon","collapseIcon","gen","cnt","App","setTerm","searchResults","setSearchResults","_useState7","_useState8","setTitle","_useState9","_useState10","setForceExpand","fam","t","Wrapper","react_router_dom","TabBar","tabs","react_router","path","Loading","activeClassName","ReactDOM","render"],"mappings":"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","file":"static/js/main.5b682196.chunk.js","sourcesContent":["//get data from backend\r\n\r\n/**\r\n * send/receive data from backend\r\n * \r\n * @param {string} endpoint \r\n * @param {object} data \r\n */\r\nexport async function getFetch(endpoint) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(endpoint, {\r\n        method: 'GET',\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"credentials\": \"include\"\r\n        }\r\n      }).then(r=> r.json()).then(r => resolve(r))\r\n      .catch(console.log);\r\n  });\r\n}\r\n\r\nexport async function postFetch(endpoint, data) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"credentials\": \"include\"\r\n        },\r\n        body: JSON.stringify(data)\r\n      }).then((r) => r.json()).then((r) => resolve(r))\r\n      .catch(console.log);\r\n  });\r\n}","// upload.js\r\nimport React, {useState} from 'react';\r\n\r\nexport function Uploader(props) {\r\n  var [dragover, setDragover]=useState(\"\");\r\n  var [uploading, setUploading]=useState(\"\");\r\n\r\n  function fileInputClick(e){\r\n    e.preventDefault();\r\n    setDragover(true);\r\n    document.getElementById('fileInput').click();\r\n  }\r\n\r\n  function onInputFile(e){\r\n    setDragover(false);\r\n    addFiles(e.target.files);\r\n  }\r\n\r\n  function onDrop(e){\r\n    e.preventDefault();\r\n    onNotHover();\r\n    var validFiles=[];\r\n\r\n    if(e.dataTransfer.items)// Use DataTransferItemList interface to access the file(s)\r\n      for (var i = 0; i < e.dataTransfer.items.length; i++) {\r\n        if (e.dataTransfer.items[i].kind === 'file'){\r\n          validFiles.push(e.dataTransfer.items[i].getAsFile());\r\n        }\r\n    }\r\n    else{ // Use DataTransfer interface to access the file(s)\r\n      for (i = 0; i < e.dataTransfer.files.length; i++){\r\n        validFiles.push(e.dataTransfer.files[i]);\r\n      }\r\n    }\r\n    if(validFiles.length){\r\n      addFiles(validFiles);\r\n    }\r\n  }\r\n\r\n  function addFiles(newFiles){\r\n    var goodFiles = [];\r\n\r\n    for (let i of newFiles) { //check if PDF\r\n      if( i.type===\"image/jpeg\" ){\r\n        goodFiles.push(i);\r\n        setUploading(true);  \r\n      }\r\n      else setDragover('flash-red'); //flash error indication\r\n    }\r\n    //add to formdata object\r\n    if(!goodFiles.length) return;\r\n\r\n    var uploadData = new FormData();\r\n\r\n    for(let f of goodFiles)\r\n      uploadData.append('file', f);\r\n\r\n    //create XHR object\r\n    let xhr = new XMLHttpRequest(),\r\n      method = 'POST',\r\n      url = '/api/image/'+props.id+\"/\"+(props.imageId+1);\r\n\r\n    xhr.open(method, url, true);\r\n\r\n    xhr.onload= function(e){\r\n      setUploading(false);\r\n      props.onChange(props.imageId+1);\r\n    }\r\n    xhr.send(uploadData);\r\n  }\r\n\r\n  function onHover(e){\r\n    e.preventDefault();\r\n    setDragover('dragover');\r\n  }\r\n  function onNotHover(){\r\n    setDragover('');\r\n  }\r\n\r\n  return(\r\n    <div className={\"fileDrop \"+dragover} onDragOver={onHover} onDrop={onDrop} onDragLeave={onNotHover} >\r\n      <input id=\"fileInput\" type=\"file\" className=\"hidden\" onChange={onInputFile}/>\r\n      <div className=\"uploadbox\" onClick={fileInputClick} > \r\n        {uploading \r\n        ? <i className=\"fa fa-spinner fa-pulse fa-3x fa-fw\"></i>\r\n        : <i className={\"fa fa-upload\"} /> \r\n        }\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","//edit.js\r\nimport React, {useState} from 'react';\r\nimport * as moment from 'moment';\r\nimport {postFetch} from './utilities.js';\r\nimport {Uploader} from './upload.js';\r\n\r\nexport function EditWindow({person, edit}){\r\n  if(!person) return null;\r\n  var [p, setPerson] = useState(person);\r\n\r\n  function close(){\r\n    edit(null);\r\n  }\r\n\r\n\r\n  function setValue(e){\r\n    let label = e.target.label || e.target.getAttribute('label');\r\n    let value = e.target.value;\r\n    p[label]=value;\r\n    setPerson({...p});\r\n  }\r\n  function save(){\r\n     console.log(p);\r\n     edit(p);\r\n     postFetch('/api/person', p);\r\n     close();\r\n  }\r\n\r\n  return(\r\n    <div className=\"modal is-active\">\r\n      <div className=\"modal-background\" onClick={close}></div>\r\n      <div className=\"modal-content\">\r\n        <section className=\"edit\">\r\n            <div className=\"edit-body\">\r\n               <div className=\"columns is-vcentered is-mobile\">\r\n                  <div className=\"column is-narrow\">\r\n                     <EditPicture id={p.id} name={p.name} imageId={p.imageId} onChange={setValue}/>\r\n                  </div>\r\n                  <div className=\"column\">\r\n                     <Input label=\"id\" value={p.id} onChange={setValue} disabled={true}/>\r\n                     <Input label=\"name\" value={p.name} onChange={setValue} />\r\n                     <Input label=\"location\" value={p.location} onChange={setValue} />\r\n                  </div>\r\n               </div>\r\n\r\n               <EditDates dates = {p.dates} onChange={setValue} />       \r\n\r\n               <EditContact contacts = {p.emails} onChange={setValue}/>\r\n\r\n               <div className=\"buttons is-right padded\">\r\n                  <button className=\"button is-primary\" onClick={save}>Save</button>\r\n                  <button className=\"button \" onClick={close}>Discard</button>\r\n               </div>\r\n            </div>\r\n        </section>\r\n      <button className=\"modal-close is-large\" aria-label=\"close\" onClick={close}></button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Input({label, value, onChange, disabled}){\r\n  return(\r\n    <div className=\"field is-horizontal\">\r\n      <div className=\"field-label is-normal\">\r\n        <label className=\"label\">{label}</label>\r\n      </div>\r\n      <div className=\"field-body\">\r\n        <div className=\"field\">\r\n          <p className=\"control\">\r\n            <input className=\"input is-small\" type=\"text\" label = {label} placeholder={label} value={value} onChange={onChange} disabled={disabled ? \"disabled\":\"\"}/>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction EditDates({dates, onChange}){\r\n   \r\n   function update({name, id, value}){\r\n      if (value===null && name===null)\r\n         dates.splice(id,1); //remove deleted item\r\n      else\r\n         dates[id][name] = value;\r\n\r\n      onChange({target: {label: \"dates\", value: [...dates]}});\r\n   }\r\n   function add(){\r\n      if(!dates) dates = [];\r\n      dates.push({description:'', date:''});\r\n      update({id:dates.length-1, name:\"description\", value:\"\"})\r\n   }\r\n   return(\r\n    <div className=\"list-editor\">\r\n       \r\n      <div className=\"list-title\">\r\n         <strong>Dates</strong>\r\n      </div>\r\n\r\n      <div className=\"list-items\">\r\n         {dates && dates.length ?\r\n            dates.map((d,i)=><DateInput date={d.date} description={d.description} onChange={update} id={i} key={\"date\"+i}/>)\r\n         : null}\r\n         <div className=\"buttons is-left\">\r\n            <button className=\"button is-small is-success\" onClick={add}><i className=\"fa fa-plus\"></i></button>\r\n         </div>\r\n      </div>\r\n    </div>\r\n   )\r\n}\r\nfunction DateInput({description, date, id, onChange}){\r\n\r\n   function update(e){\r\n      onChange({\r\n         id: id,\r\n         name: e.target.name,\r\n         value: e.target.value\r\n      });\r\n   }\r\n   function remove(){\r\n      onChange({\r\n         id:id,\r\n         name:null,\r\n         value: null\r\n      });\r\n   }\r\n\r\n   return(\r\n      <div className='person-date field is-horizontal'> \r\n         <div className=\"field-body\">\r\n            <div className=\"field\">\r\n               <p className=\"control has-icons-left\">\r\n                  <input className=\"input is-small\" value={description} name=\"description\" placeholder=\"description\"onChange={update}> \r\n                  </input>\r\n                  <span className=\"icon is-small is-left\">\r\n                     <i className=\"fa fa-info\"></i>\r\n                  </span>\r\n               </p>\r\n            </div>\r\n            <div className=\"field\">\r\n               <p className=\"control has-icons-left\">\r\n                  <input className=\"input is-small\" value={moment(date).format(\"YYYY-MM-DD\")} name=\"date\" type=\"date\" onChange={update}></input>\r\n                  <span className=\"icon is-small is-left\">\r\n                     <i className=\"fas fa-calendar\"></i>\r\n                  </span>\r\n               </p>\r\n            </div>\r\n            <div className=\"field\">\r\n               <p className=\"control \">\r\n                  <button className=\"button is-small\" onClick={remove}><i className=\"fa fa-trash\"></i></button>\r\n               </p>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\nfunction EditPicture(props){\r\n   var [img, setImg] = useState(\"/images/\"+props.id+\"_\"+props.imageId+\".jpg\");\r\n   function reload(imageId){\r\n      setImg(\"/images/\"+props.id+\"_\"+imageId+\".jpg\");\r\n      props.onChange({target:{\r\n         label: 'imageId',\r\n         value: imageId\r\n      }});\r\n   }\r\n\r\n   return(\r\n      <Uploader id={props.id} imageId={props.imageId} onChange={reload}>\r\n         <div className=\"edit-image\"> \r\n            <img src={img} alt={props.name}/> \r\n         </div>\r\n      </Uploader>\r\n   )\r\n}\r\n\r\nfunction EditContact({contacts,  onChange}){\r\n   function update({id, contact}){\r\n      if (contact===null)\r\n         contacts.splice(id,1); //remove deleted item\r\n      else\r\n         contacts[id]=contact; //set updated data\r\n      onChange({target:{\r\n         label: \"emails\",\r\n         value: contacts\r\n      }});\r\n   }\r\n   function add() {\r\n      if(!contacts) contacts = [];\r\n      update({id: contacts.length, contact: \"\"});\r\n   }\r\n   \r\n   return(\r\n    <div className=\"list-editor\">\r\n      <div className=\"list-title\">\r\n         <strong>Contact Info</strong>\r\n      </div>\r\n\r\n      <div className=\"list-items\">\r\n         {contacts && contacts.length ? \r\n            contacts.map((c,i)=><ContactInput contact={c} id={i} onChange={update} key={\"contact\"+i}/>)\r\n         : null}\r\n         <div className=\"buttons is-left\">\r\n            <button className=\"button is-small is-success\" onClick={add}><i className=\"fa fa-plus\"></i></button>\r\n         </div>\r\n      </div>\r\n    </div>\r\n   )\r\n}\r\nfunction ContactInput({contact, id, onChange}){\r\n   function update(e){\r\n      onChange({\r\n         id: id,\r\n         contact: e.target.value,\r\n      });\r\n   }\r\n   function remove(){\r\n      onChange({\r\n         id:id,\r\n         contact:null\r\n      });\r\n   }\r\n   return(\r\n      <div className='field'> \r\n         <div className=\"field-body\">\r\n            <div className=\"field\">\r\n               <p className=\"control has-icons-left\">\r\n                  <input className=\"input is-small\" type=\"email\" value={contact} placeholder=\"email\" onChange={update}>\r\n                  </input>\r\n                  <span className=\"icon is-small is-left\">\r\n                     <i className=\"fa fa-envelope\"></i>\r\n                  </span>\r\n               </p>\r\n            </div>\r\n            <div className=\"field\">\r\n               <p className=\"control \">\r\n                  <button className=\"button is-small\" onClick={remove}><i className=\"fa fa-trash\"></i></button>\r\n               </p>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   )\r\n}","//Inputs\r\nimport React, {useState} from 'react';\r\nimport * as moment from 'moment';\r\nimport {EditWindow} from './edit.js';\r\n\r\nconst UID = Number(getCookie('level'));\r\n\r\nexport function Directory(props){\r\n  var family = countChildren(props.family);\r\n  var [person, setPerson] = useState(null);\r\n\r\n  function edit(p){\r\n    if(p===null)\r\n      setPerson(null);\r\n    else{\r\n      let idx=family.findIndex(el=>el.id===p.id);\r\n      if(idx===-1)\r\n        window.location.reload();\r\n      else{\r\n        family[idx]=p;\r\n        props.setFamily(family);\r\n      }\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div className=\"directory\">\r\n      { family.map(member=> <Person person={member} key={member.id} forceExpand = {props.forceExpand} edit={setPerson}/> ) }\r\n      <EditWindow person={person} edit={edit}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Person({person, forceExpand, edit, nextChild}){\r\n  var [expanded, setExpanded] = useState(forceExpand);\r\n  var [cache, setCache] = useState(forceExpand);\r\n\r\n  //check whether force value has changed\r\n  if(forceExpand !== cache){\r\n    setExpanded(forceExpand);\r\n    setCache(forceExpand);\r\n  }\r\n\r\n  var toggleExpanded = ()=>{\r\n    setExpanded(!expanded);    \r\n  };\r\n  function newChild(){\r\n    let newChild = {\r\n      id: Number(person.id+String(person.childCount[0]+1)), \r\n      imageId: 0, name:\"\", location:\"\", dates:[]};\r\n    edit(newChild);\r\n  }\r\n\r\n  return(\r\n    <section className={\"person \" + generation(person.id) + (person.blur ? \" blur\": \"\") } id={person.id}>\r\n      <div className=\"person-title\" onClick={toggleExpanded}>\r\n        <span>\r\n          <Expander expanded={expanded} /> &nbsp;\r\n          {person.name}\r\n        </span>\r\n        <ChildCount childCount = {person.childCount} />\r\n      </div>\r\n      {expanded ?\r\n        <div className=\"person-body\">\r\n          <Picture id={person.id} name={person.name} imageId={person.imageId}/>\r\n          <div className=\"person-details\">\r\n            <Location location={person.location} />\r\n            <div className=\"person-dates\">\r\n              {person.dates.map(d=><Date date={d} key={d.date}/>)}\r\n            </div>            \r\n            \r\n            <Contact emails = {person.emails} />\r\n          </div>\r\n          {isAncestor(person.id, UID) ?\r\n          <div className=\"buttons is-right padded\">\r\n            <button className=\"button is-small editButton\" onClick={()=>edit(person)}><i className=\"fa fa-user-edit\"></i></button>\r\n            <button className=\"button is-small editButton\" onClick={newChild}><i className=\"fa fa-user-plus\"></i></button>\r\n          </div>\r\n          : null}\r\n          \r\n        </div>\r\n      : null }\r\n    </section>\r\n  );\r\n}\r\n\r\n// determine if an id is in the ancestral lineage of current (includes current)\r\nfunction isAncestor(id, current){\r\n   while(id>0){\r\n      if(current===id) return true;\r\n      id=Math.floor(id/10);\r\n   }\r\n   return false;\r\n}\r\n\r\nfunction Expander({expanded}){\r\n  if(expanded)\r\n    return <i className=\"fa fa-caret-down\"></i> ;\r\n  else\r\n    return <i className=\"fa fa-caret-right\"></i> ;\r\n}\r\n\r\nfunction countChildren(family){\r\n  for(let i in family){\r\n\r\n    let c=0, gc=0, ggc=0;\r\n    let pid = family[i].id;\r\n\r\n    for(let s = Number(i)+1; s<family.length; s++){\r\n\r\n      let cid = family[s].id;\r\n      if(Math.floor(cid/10)===pid)       c++; //children\r\n      else if(Math.floor(cid/100)===pid)  gc++ //grandchildren\r\n      else if(Math.floor(cid/1000)===pid) ggc++; //great grandchildren\r\n\r\n    }\r\n    family[i].childCount = [c, gc, ggc];\r\n  }\r\n  return family;\r\n}\r\nfunction generation(id){\r\n  if(id===1)\r\n    return \"gen-0\";\r\n  if(id<19)\r\n    return \"gen-1\";\r\n  if(id<199)\r\n    return \"gen-2\";\r\n  if(id<1999)\r\n    return \"gen-3\";\r\n  if(id<1999)\r\n    return \"gen-4\";\r\n}\r\n\r\n\r\n\r\nfunction Location (props){\r\n  if(!props.location)\r\n    return null;\r\n  return(\r\n    <div className=\"person-location\">\r\n      <i title=\"Current Location\" className=\"fa fa-map-marker-alt\"></i> &nbsp;\r\n      <a href={\"https://google.com/maps/search/\"+props.location}>\r\n        {props.location}\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\nexport function Picture(props){\r\n  return(\r\n    <div className=\"person-image\"> \r\n      <img src={`/images/${props.id}_${props.imageId ||'0'}.jpg`} alt={props.name}/> \r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Contact(props){\r\n  if(!props.emails || !props.emails.length )\r\n    return null;\r\n  return(\r\n    <div className=\"person-contact\">\r\n      {props.emails.map(e=><p className='person-email' key={e}><i className=\"fa fa-envelope\"></i><a href={'mailto:'+e}> {e} </a></p>)}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ChildCount(props){\r\n  if(!props.childCount) return null;\r\n\r\n  var baby = <i className='fa fa-baby'></i>;\r\n  return(\r\n    <span className=\"child-count\">\r\n      {props.childCount[0] ? \r\n        <span title='children'><strong>{baby} {props.childCount[0]} </strong></span> \r\n        : null}\r\n      {props.childCount[1] ? \r\n        <span title='grandchildren'><strong>{baby}{baby} {props.childCount[1]} </strong></span> \r\n        : null}\r\n      {props.childCount[2] ? \r\n        <span title='great grandchildren'><strong>{baby}{baby}{baby}  {props.childCount[2]} </strong></span> \r\n        : null}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction Date(props){\r\n  if(!props || !props.date || !props.date.description || !props.date.date)\r\n    return null;\r\n\r\n  return(\r\n    <div className='person-date'> \r\n      {getDescription(props.date.description)} {formatDate(props.date.date)}\r\n    </div>\r\n  );\r\n}\r\n\r\n//gets icon for description\r\nfunction getDescription(d){\r\n  let l = d.toLowerCase();\r\n  if(l.includes(\"birthday\") || l.includes(\"bday\") || l.includes(\"born\") )\r\n    return <i title={d} className='fa fa-birthday-cake'></i>;\r\n  if(l.includes(\"married\") || l.includes(\"wedding\") || l.includes(\"anniversary\"))\r\n    return <i title={d} className='fas fa-ring'></i>;\r\n}\r\n\r\n\r\nfunction formatDate(dt){\r\n  dt = moment(dt);\r\n\r\n  var length = moment().diff(dt, 'months');\r\n\r\n  //only show decimal for less than 3 years out\r\n  if(length<36)\r\n    length = round1(length/12);\r\n  else\r\n    length = round0(length/12);\r\n\r\n  return `${dt.format(\"M/D/YYYY\")} (${length})`;\r\n}\r\n\r\nfunction round0(num){\r\n  return Math.floor(num);\r\n}\r\nfunction round1(num){\r\n  return(Math.floor(num*10)/10);\r\n}\r\n\r\nfunction getCookie(name){\r\n    var val = document.cookie.match('(^|[^;]+)\\\\s*' + name + '\\\\s*=\\\\s*([^;]+)');\r\n    return val ? val.pop() : '';\r\n}\r\n","import React from 'react';\r\nimport * as moment from 'moment';\r\nimport {Picture} from './family.js';\r\nimport * as _ from 'lodash';\r\nimport { HashLink as Link } from 'react-router-hash-link';\r\n\r\nexport function News(props){\r\n  \r\n  return(\r\n    <div className=\"news\">\r\n      {sortDates(props.family).map((d)=><DateItem item={d} key={d.id+\"_\"+d.date} />)}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction sortDates(family){\r\n  var dates = [];\r\n\r\n  for(let i of family){\r\n    for(let j of i.dates){\r\n      let sortDate = Number(moment(j.date).format(\"DDD\"));\r\n\r\n      if(sortDate < Number(moment().format(\"DDD\"))-30)\r\n         sortDate+=366;\r\n\r\n      dates.push({\r\n        displayDate: moment(j.date).format(\"MMMM D\"),\r\n        date: moment(j.date),\r\n        sortDate: sortDate,\r\n        description: j.description,\r\n        name: i.name,\r\n        id: i.id,\r\n        imageId: i.imageId,\r\n        blur: i.blur\r\n      });\r\n    }\r\n  }\r\n  return _.sortBy(dates, [(i)=>i.sortDate]); //return sorted list\r\n}\r\n\r\nfunction DateItem({item}){\r\n\r\n   return(\r\n      <div className={\"news-item \" + (item.blur ?\"blur\":\"\")}>\r\n         <div className=\"columns is-mobile  is-vcentered\">\r\n            <div className=\"column is-narrow\">\r\n              <Picture id={item.id} imageId={item.imageId}/>\r\n            </div>\r\n            <div className=\"column\">\r\n              <div><strong>{item.displayDate}</strong></div>\r\n              <div><Link to={\"/Directory/#\"+item.id}>{item.name}</Link></div>\r\n              <div>\r\n                {item.description} <strong>{moment().add(335, 'days').diff(item.date, 'years')}</strong>\r\n                {item.description.toLowerCase().includes('married') \r\n                ? \" years\"\r\n                : null }\r\n              </div>\r\n            </div>           \r\n            \r\n         </div>\r\n      </div> \r\n   );\r\n}","//stats.js\r\n\r\nimport React from 'react';\r\n\r\nexport function Stats({family}){\r\n   var counts = countFamily(family);\r\n   var total = counts.reduce((a,b)=>a+b);\r\n   return(\r\n      <div className=\"stats\">\r\n         <dl className=\"dl-horizontal\">\r\n            {counts.map(((g,i)=>g>0?<React.Fragment key={\"gen_\"+i}><dt>Generation {i+1} </dt> <dd> {g} </dd> </React.Fragment>:null))}\r\n            <dt>Total</dt><dd>{total}</dd>\r\n         </dl>\r\n      </div>\r\n   )\r\n}\r\n\r\nfunction countFamily(family){\r\n   var stats = [0,0,0,0,0];\r\n   for(let i of family){\r\n      if(isMarried(i))\r\n         stats[getGen(i.id)]+=2;\r\n      else\r\n         stats[getGen(i.id)]+=1;\r\n   }\r\n   return stats;\r\n}\r\n\r\nfunction getGen(id){\r\n   return String(id).length-1;\r\n}\r\n\r\nfunction isMarried(p){\r\n   if(p.dates && p.dates.length)\r\n      for(let d of p.dates){\r\n         let desc = d.description.toLowerCase();\r\n         if (desc.includes('married') \r\n            || desc.includes('anniversary')\r\n            || desc.includes('wedding'))\r\n            return true;\r\n      }\r\n   return false;\r\n}","//scrollspy\r\nimport React, {useState, useEffect} from 'react';\r\n\r\nexport function ScrollSpy(props){\r\n   var [children, setChildren] = useState(props.children);\r\n   window.onscroll= scroll;\r\n   \r\n   useEffect(()=>scroll(),[]); //initialize scrollspy\r\n   \r\n   function scroll(){\r\n      let idList = props.children.map(c=>c.props.id);\r\n      let pos = window.scrollY;\r\n      let id = getCurrentId(idList, pos);\r\n      let active;\r\n      let newChildren = [];\r\n      for(let i of props.children){\r\n         active = i.props.id===id;\r\n         if(isAncestor(id, i.props.id) || isSibling(id, i.props.id) || isChild(id, i.props.id))\r\n            newChildren.push(React.cloneElement(i, {active:active}));\r\n      }\r\n      setChildren(newChildren);\r\n\r\n      //cleanup scroll listener on unmount\r\n      return ()=>{\r\n         window.onscroll=null;\r\n      };\r\n   };\r\n   return(\r\n      <div className=\"family-map\">\r\n         {children}\r\n      </div>\r\n   );\r\n}\r\n\r\n// determine if an id is in the ancestral lineage of current (includes current)\r\nfunction isAncestor(id, current){\r\n   while(id>0){\r\n      if(current===id) return true;\r\n      id=Math.floor(id/10);\r\n   }\r\n   return false;\r\n}\r\n\r\n//check if they have the same parent\r\nfunction isSibling(id, current){\r\n   return Math.floor(id/10)===Math.floor(current/10);\r\n}\r\n\r\nfunction isChild(id, current){\r\n   return Math.floor(current/10)===id;\r\n}\r\n\r\n//find the currently scrolled-top item\r\nfunction getCurrentId(list, pos){\r\n   var tops = [];\r\n   for(let i of list){\r\n      if(document.getElementById(i))\r\n         tops.push({\r\n            id: i,\r\n            top: document.getElementById(i).offsetTop\r\n         });\r\n   }\r\n\r\n   tops.sort((i,j)=>i.pos-j.pos);\r\n\r\n   for(let i of tops)\r\n      if(i.top>=pos)\r\n         return(i.id)\r\n}","import React from 'react';\r\nimport {ScrollSpy} from './scrollspy.js';\r\n\r\nexport function Sidebar(props){\r\n\r\n  return(\r\n    <aside className=\"navbar\">\r\n      <SearchBox onChange={props.search} term={props.term}/>\r\n      <ExpandButton expanded={props.expanded} toggleExpand={props.toggleExpand}/>\r\n      <ScrollSpy items={ props.family.map(m=>m.id.toString()) } currentClassName=\"active\" >\r\n        {props.family.map(m=><NavItem name={m.name} id={m.id} key={m.id}/>)}\r\n      </ScrollSpy>\r\n    </aside>\r\n  );\r\n}\r\nfunction ExpandButton(props){\r\n  var expandIcon = <i className=\"fa fa-expand-arrows-alt\"></i>;\r\n  var collapseIcon = <i className=\"fa fa-compress-arrows-alt\"></i>;\r\n  return(\r\n    <React.Fragment>\r\n    {props.expanded \r\n      ? <button title=\"collapse all\" className=\"button is-small is-fullwidth\" onClick={props.toggleExpand}> {collapseIcon} &nbsp; Collapse All</button>\r\n      : <button title=\"expand all\" className=\"button is-small is-fullwidth\" onClick={props.toggleExpand}> {expandIcon} &nbsp;Expand All </button>\r\n    } \r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction SearchBox(props){\r\n  return(\r\n    <input className=\"searchbox input is-small\" type=\"search\" placeholder=\"search\" value={props.term} onChange={(e)=>props.onChange(e.target.value)}></input>\r\n  );\r\n}\r\n\r\nfunction NavItem(props){\r\n  let gen=0;\r\n  \r\n  for(let cnt=props.id; cnt>9; cnt=cnt/10)\r\n    gen++;\r\n\r\n  return(\r\n    <div className={(props.active ? \"active\" : \"\") + \" gen-\"+gen}><a href={'#'+props.id}> {props.name}</a></div>\r\n  )\r\n}","//LittleFoot Library front-end\r\n\r\nimport ReactDOM from 'react-dom';\r\nimport React, {useState, useEffect} from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch, Route, NavLink\r\n} from \"react-router-dom\";\r\n\r\nimport {getFetch} from './utilities.js';\r\nimport {Directory} from './family.js';\r\nimport {News} from './news.js';\r\nimport {Stats} from './stats.js';\r\nimport {Sidebar} from './sidebar.js';\r\nimport './family.sass';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n//main app component\r\nexport default function App(props){\r\n  \r\n  var [family, setFamily] = useState(null);\r\n  var [term, setTerm] = useState('');\r\n  var [searchResults, setSearchResults] = useState(null);\r\n  var [title, setTitle] = useState(null);\r\n  var [forceExpand, setForceExpand] = useState(true);\r\n\r\n  function searchTerm(t){\r\n    setSearchResults(search(t,family));\r\n    setTerm(t);\r\n  }\r\n\r\n  useEffect(()=>{\r\n    getFetch('/api/family')\r\n    .then(fam=>{\r\n      if(fam){\r\n        setFamily(fam);\r\n        setSearchResults(fam);\r\n      }\r\n    });\r\n    getFetch('/api/name')\r\n    .then(t=>{\r\n      if(t){\r\n        setTitle(t.title);\r\n        document.title=t.title;\r\n      } \r\n    });\r\n  },[]);\r\n\r\n  return(\r\n    <Wrapper>\r\n      <h1 className=\"title is-3 has-text-centered has-text-primary\"><a href =\"/\">{title}</a></h1>\r\n        <Router>\r\n          <React.Fragment>\r\n            <TabBar tabs = {[\"Directory\", \"News\", \"Stats\"]} />\r\n            <a href=\"/logout\" className=\"logout\"> Logout </a> \r\n\r\n            {searchResults ?\r\n                <Switch>\r\n                  <Route path=\"/directory\">\r\n                    <div className=\"directory-container\">\r\n                      <Sidebar search = {searchTerm} term={term} family={searchResults} expanded = {forceExpand} toggleExpand={()=>setForceExpand(!forceExpand)}/>\r\n                      <Directory family={searchResults} forceExpand={forceExpand} setFamily={setFamily}/>\r\n                    </div>\r\n                  </Route>\r\n                  <Route path=\"/news\">\r\n                    <News family={searchResults} />\r\n                  </Route>\r\n                  <Route path=\"/stats\">\r\n                    <Stats family={searchResults} />\r\n                  </Route>\r\n                </Switch>\r\n            : <Loading /> }\r\n          </React.Fragment>\r\n        </Router>\r\n    </Wrapper> \r\n  );\r\n}\r\n\r\nfunction TabBar(props){\r\n  return(\r\n    <div className=\"tabs is-centered\">\r\n      <ul>\r\n        {props.tabs.map((t)=>\r\n          <li key={t} className=\"\">\r\n            <NavLink to={\"/\"+t} activeClassName=\"is-active\">{t}</NavLink>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\nfunction Loading(props){\r\n    return(<div className=\"is-loading\"> Loading ... </div>);\r\n  \r\n}\r\n\r\nfunction Wrapper(props){\r\n  return(\r\n    <div className=\"main\">\r\n      {props.children}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n/**\r\n * sets blur: true on non-hit family members\r\n * @param {string} term \r\n * @param {Array} family \r\n */\r\nfunction search(term, family){\r\n  for(let i of family){\r\n    if(!term){ //if the term is blank, just set everything to unblur\r\n      i.blur = false;\r\n      continue;\r\n    }\r\n    i.blur=true;\r\n    for(let p in i){\r\n      if(i[p].toString().toLowerCase().includes(term.toLowerCase())){ //not a deep search\r\n        i.blur=false;\r\n      }\r\n      if(!i.blur) break;\r\n    }\r\n  }\r\n  return family;\r\n}"],"sourceRoot":""}